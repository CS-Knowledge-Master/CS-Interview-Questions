# 데이터베이스

## 트랜잭션에 대해서 설명해주세요.

---

### 트랜잭션이란?

데이터베이스의 상태를 변화시키기 위해 수행하는 작업의 단위이다.  
논리적으로 동시에 일어나야 하는 기능들은 하나의 트랜잭션으로 묶어야 한다.

### 트랜잭션의 특징

트랜잭션은 네 가지의 특징(ACID)을 갖는다.

1. Atomicity (원자성): 트랜잭션 내의 작업은 모두 커밋되거나, 모두 롤백되어야 한다. 
2. Consistency (일관성): 데이터가 갖는 특징(제약조건 등)이 유지되어야 한다.
3. Isolation (고립성): 다른 트랜잭션이 완료되기 전까지 간섭할 수 없어야 한다.
4. Duration (지속성): 시스템에 문제가 발생해도 데이터 자체는 문제없이 보존되어야 한다.

### 데드락

트랜잭션 A는 데이터 a, 트랜잭션 B는 데이터 b를 수정한다고 하자.  
그리고 트랜잭션 A가 데이터 b를, 트랜잭션 B가 데이터 a를 참조한다고 하면,  
격리 수준에 따라 트랜직션 A와 트랜잭션 B 모두 완료되지 못 하고 데드락 상태에 빠질 수 있다.

데드락은 다음 네 가지 조건을 모두 만족해야 한다.
1. 상호 배제
2. 점유 대기
3. 비선점
4. 순환 대기

### 상호 배제(Mutual exclusion)

데이터를 사용하는 동안 다른 트랜잭션에서 같은 데이터를 사용할 수 없는 경우.   
상호 배제의 줄임말이 뮤텍스이다.

### 점유 대기(Hold and wait)

데이터를 사용하고 있으며, 다른 트랜잭션이 사용 중인 데이터를 사용하기 위해 대기하는 경우.  

### 비선점(No preemption)

다른 트랜잭션이 사용 중인 데이터를 뺏을 수 없는 경우.  

### 순환 대기(Circular wait)

점유 대기 상태인 트랜잭션이 둘 이상 연결되어 닫힌 그래프가 만들어지는 경우.

---

### 면접 답변용 정리

데이터베이스의 상태를 변화시키기 위해 수행하는 작업의 단위이다.  
논리적으로 동시에 일어나야 하는 기능들은 하나의 트랜잭션으로 묶어야 한다.  

---

### 꼬리 질문

1. 트랜잭션의 특징은 무엇이 있는가?
2. 트랜잭션 격리 수준에는 무엇이 있는가?
3. 공유락? 배타락?
