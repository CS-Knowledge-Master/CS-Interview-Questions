# 네트워크

##  TCP와 UDP의 차이점에 대해서 설명해보세요.

---

### TCP란?

**TCP (Transmission Control Protocol)**

TCP는 3-way handshake를 통해 연결을 수립하고 나서 데이터를 세그먼트 단위로 쪼개서 통신한다.  
그리고 모든 세그먼트를 받았다면 4-way handshake를 통해 연결을 종료하고 세그먼트의 순서에 따라 원본 데이터로 완성을 시킨다.  

### UDP란?

**UDP (User Datagram Protocol)**

UDP는 연결 없이, 성공적으로 수신했는지 여부와 상관 없이 지속적으로 전송하는 방식이다.

### TCP와 UDP의 차이는?

TCP에서는 연결을 수립함으로써 데이터를 세그먼트 단위로 쪼개서 보내더라도, 연결이 완료되기 전까지 모든 세그먼트를 수신받을 수 있도록 보장한다.
각각의 세그먼트에는 순서가 할당되어 있기 떄문에 수신자는 어떤 세그먼트를 받지 못 했는지 알 수 있다.  
세그먼트를 잘 받았다면 이를 송신자에게 알려주며, 받지 못 했다면 다시 요청한다.  
세그먼트에 에러가 있다면 송신자에게 다시 요청해서 에러를 복구하는 요소도 존재한다.  

반면 UDP는 TCP와 다르게 연결을 수립하지 않기 떄문에 세그먼트의 순서가 불필요하며, 모든 세그먼트가 독립적인 데이터라고 보면 된다.  
TCP에서 사용하는 신뢰성을 보장하기 위한 요소들이 없기 떄문에 TCP에 비해서 속도가 비약적으로 빠르다.  
다만 UDP의 스펙이 기본적으로는 신뢰성을 보장하지 않을 뿐, 사용자의 필요에 따라 신뢰성을 보장할 수 있도록 구현할 수 있다. (QUIC)  

### 헤더

TCP
- 발신자 포트
- 목적지 포트
- 순서 번호 
- 오류 검출 코드

UDP
- 발신자 포트
- 목적지 포트
- 오류 검출 코드

IP
- 발신자 ip 주소
- 목적지 ip 주소
- 오류 검출 코드

### 윈도우 사이즈

TCP 통신 시 하나의 패킷에 대한 응답을 받을 때까지 대기하는 것은 시간 낭비이므로, 윈도우 사이즈 이하의 패킷을 동시에 보낸다.

### 흐름제어

TCP에서 송신되는 데이터를 수신자가 모두 처리하지 못 할 경우 문제가 발생할 수 있으므로 수신자는 처리할 수 있는 크기(윈도우 사이즈)를 송신자에게 지속적으로 보낸다.

### 혼잡제어

라우터에서 데이터가 몰려 수신자가 데이터를 처리하지 못 한 경우, 송신자는 다시 데이터를 보내게 되기 때문에 수신자의 부담이 가중된다.  
이 때문에 송신자가 보내는 데이터 전송속도를 제어하는 것을 말한다.

---

### 면접 답변용 정리

TCP와 UDP의 차이점은 둘의 사용 목적의 차이에서 비롯되었다고 볼 수 있을 것 같다.  
TCP는 데이터의 신뢰성을 보장하기 위해 사용하고, UDP는 데이터 전송 효율과 속도를 위해 사용한다.  
TCP에서는 3/4-way handshake로 연결 수립/해제를 통해 하나의 연결 내에서 온전하게 데이터를 받을 수 있도록 한다.  
반면에 UDP는 수신자가 데이터를 수신했는지 유무에 관계없이 지속적으로 데이터를 보낸다.  

---

### 꼬리 질문

1. TCP가 신뢰성을 보장하는 방법에는 어떤 것들이 있을까
2. TCP의 3/4-way handshake에 대해서
3. UDP는 신뢰성을 보장할 수 없는가?
