# 데이터베이스

## 데이터베이스에서 인덱스를 사용하는 이유 및 장단점에 대해 설명해주세요.

---

### 알고 있던 내용

테이블의 특정 칼럼에 대해 인덱싱을 하면 인덱스와 함께 데이터, 혹은 물리적 주소를 저장한다.  
저장된 데이터나 물리적 주소를 바탕으로 검색 속도를 향상시킨다.  

그러나 인덱스를 생성하기 위한 저장 공간이 필요하며, 테이블에서 데이터가 변경될 때 저장한 인덱스도 수정해야 하는 작업이 추가로 필요하다.  

---

### 조사한 내용

테이블의 특정 칼럼에 대해 인덱싱을 하고 쿼리 시 인덱스가 적용된 칼럼을 조건으로 넣으면 인덱스를 타면서 검색 속도를 향상시킬 수 있다. 
인덱스를 이용할 경우 검색 속도를 비약적으로 상승시킬 수 있다.

그러나 인덱스는 대표적으로 다음과 같은 단점들이 있다.
1. 인덱스를 저장하기 위한 메모리가 필요하다.
2. 원본 테이블에서 데이터가 삽입/수정/삭제되는 경우, 인덱스도 같이 수정하는 작업도 함께 필요하다.
3. 개발 스펙이 변화함에 따라 인덱스도 함께 수정되어야 한다. 인덱스가 많다면 관리에 어려움이 생길 수 있다.

따라서 인덱스는 꼭 필요한 경우에만 사용해야 하며, 주로 다음과 같은 경우에 대해 자주 사용한다.
- 대량의 데이터가 포함된 테이블을 검색하는 경우
- 쿼리 시 where의 조건으로 자주 들어가는 칼럼인 경우
- 부등호(<, >)가 아닌 등호(=)로 비교되는 칼럼인 경우
- 데이터가 unique하거나 중복되는 데이터가 적은 칼럼인 경우
- 쿼리 시 join에 자주 사용되는 칼럼인 경우
- 자주 검색하는 칼럼인 경우

---

### 면접 답변용 정리

특정 칼럼에 대해 인덱스와 데이터 혹은 물리적 주소를 저장하여 테이블의 검색 속도를 향상시키기 위해 사용한다.
인덱스를 저장하기 위한 메모리가 필요하며, 원본 테이블에 데이터가 변경될 경우 인덱스도 함께 수정되어야 한다.  

따라서 적절하게 사용할 경우 검색 속도를 비약적으로 상승시킬 수 있지만, 여러 조건을 고려해야 한다.
대량의 데이터가 저장된 테이블, 쿼리 시 where의 조건이나 join에 자주 사용되는 칼럼, 자주 사용되는 칼럼 등이 인덱스를 사용하기에 적합하다고 볼 수 있다.

---

### 꼬리 질문

1. 인덱스에 사용되는 자료구조  
   - 해시 테이블  
     - key와 hash 값으로 이루어져 있다.
     - 등호 연산의 경우 검색 속도가 매우 빠르다.
     - 해시 값으로 이루어져 있기 때문에 부등호 연산(<, >)이 불가능하다.
   - B-Tree
     - 데이터 분포에는 비교적 영향이 적어 균형잡힌 검색 속도를 보인다.
     - 범용적으로 주로 사용하며, 이를 변형한 자료구조도 많이 사용한다.

2. 인덱스의 종류
   - 클러스터형 인덱스
     - 인덱스로 지정한 칼럼에 따라 테이블을 정렬한다.
     - 테이블 당 하나만 존재할 수 있다.
     - 인덱스에 데이터가 직접 저장된다.
   - 비클러스터형 인덱스
     - 하나의 테이블에 여러 개의 비클러스터형 인덱스가 존재할 수 있다.
     - 인덱스에 데이터의 물리적 주소가 저장된다.
