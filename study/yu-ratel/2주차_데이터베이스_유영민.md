# 🎯 트랜잭션에 대해서 설명해주세요.

# 📝 Transaction

- DB에서 상태를 변경시키기 위한 논리적인 하나의 작업단위 (쪼갤 수 없는 업무의 최소단위)
  > ex) a 가 b 에게 1,000원을 송금한다.
  >
  > 1. a 의 계좌에서 1,000원을 출금한다.
  > 2. b의 게좌에 1,000원을 입금한다.

### 📋 연산

- commit
  > 성공적으로 작업이 되었을 시 완료 되었음을 반영하는 연산
- rollback
  > 비정상적으로 종료되거나, 오류가 발생되었을 때 되돌리는 연산

### 📋 특징 (ACID)

- Atomicity (원자성)
  - 모든 명령이 완전히 수행되거나, 취소 되어야 한다.
- Consistency (일관성)
  - 결과는 언제나 일관성있는 상태여야 한다.
    > 일관성 ? -> 데이터에 결함이 없는 상태, 즉 정확하고 일관되게 유지하는 것
- Isolation (독립성)

  - 하나의 트랜잭션이 실행되고 있을 때 다른 트랜잭션에서 수행결과를 참조할 수 없고 연산에 끼어들 수 없다.
    > 서로 영향을 끼칠 수 없다.
  - 하나의 트랜잭션이 실행되고 또다른 트랜잭션이 실행되어야 하는 격리성의 특성상 순차적으로 진행해야 하여 데이터가 많아질 시 성능상 단점이 생길 수 있는데 이를 위한 4가지의 [고립 수준](#고립수준)이 존재한다.

- Durability (지속성)
  - 성공된 결과는 영구적으로 반영되어야 한다.

### 📋 독립성 관련 문제점

- dirtyRead

  - 아직 commit 이 되지않았을 때 다른 트랜잭션에서 해당 값을 조회 할 수 있는 문제

- nonRepeatableRead

  - 하나의 트랜잭션 내에서 같은 데이터를 반복 조회할 때 항상 같은 결과를 보장해야하지만 서로 다른 값으로 나오는 문제

- Phantom Read
  - 새로운 데이터가 생기거나, 기존의 데이터가 사라지는 문제

### 📋 고립 수준

> 아래로 내려갈 수록 더 엄격하기에 이슈는 적게 발생하고, 성능은 떨어진다.

1. Read Uncommitted

- commit 하지않은 데이터를 읽을 수 있어 동시 처리 성능이 높지만, 모든 문제가 발생할 가능성이 높다.

2. Read Committed

- commit 된 데이터만 읽을 수 있으며, 보통 이 단계를 디폴트 수준으로 지정한다.

3. Repeatable Read

- 시작되기 전 commit 된 내용만 읽을 수 있으며, 윗 단계들의 문제를 해결할 수 있지만 Phantom Read의 문제점이 있다.

4. Serializable

- 가장 엄격한 수준 모든 문제점을 해결할 수 있지만 성능이 느리다.
