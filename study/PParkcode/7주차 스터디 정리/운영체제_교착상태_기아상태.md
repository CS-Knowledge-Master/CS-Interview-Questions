
# 운영체제 - 교착상태와 기아상태

## 교착상태(Dead Lock)란?

교착상태란 상호 배제에의해 나타나는 문제점으로, 둘 이상의 프로세스들이 자원을 점유한 상태에서 서로 다른 프로세스가 점유하고 있는 자원을 요구하며 무한정 기다리는 현상을 의미한다.

![](https://velog.velcdn.com/images%2Funderlier12%2Fpost%2F9009d13f-0296-4219-b82c-d7e30c42bf91%2Fimage.png)


## 교착상태가 발생하는 4가지 조건

교착상태가 발생하기 위해서는 4가지 조건 모두가 충족되어야 한다.
4가지 조건 중 하나라도 충족되지 않으면 교착상태가 발생하지 않는다.


#### 1. 상호배제(Mutual Exclusion)
한번에 한개의 프로세스만이 공유 자원을 사용할 수 있어야 한다.

#### 2. 점유와 대기(Hold and Wait)
최소한 하나의 자원을 점유하고 있으면서, 다른 프로세스에 할당되어 사용되고 있는 자원을 추가로 점유하기 위해 대기하는 프로세스가 있어야 한다.

#### 3. 비선점(Non-preemption)

다른 프로세스에 할당된 자원은 사용이 끝날 때까지 강제로 빼앗을 수 없어야 한다.

#### 4. 환형 대기(Circular Wait)
공유자원과 이를 사용하기 위해 대기하는 프로세스들이 원형으로 구성되어 있어 자신에게 할당된 자원을 점유하면서 앞이나 뒤에 있는 프로세스의 자원을 요구해야 한다.


## 교착상태를 어떻게 막을 수 있을까?


### 예방 기법
- 예방 기법은 위의 4가지 조건 중 어느 하나를 제거함으로써 교착 상태를 예방할 수 있다.
- 가장 자원 낭비가 심한 기법이다.

### 회피 기법

- 회피 기법은 교착상태가 발생할 가능성을 배제하지 않고, 교착상태가 발생하면 적절히 피해나가는 방법으로, 주로 `Banker's Alogorithm`이 사용된다.


### 회복 기법

- 교착상태가 발생했을 때 해결하는 기법이다.

- **사용자 처리**
    - 교착상태에 있는 프로세스 중 하나의 프로세스를 사용자가 강제 종료

- **시스템 처리**
    - 교착상태에 있는 모든 프로세스를 중지한다.
    - 교착상태가 해결될 때까지 한 프로세스씩 중지한다.

    - 프로세스들로부터 자원을 빼앗아, 교착상태가 해결될 때까지 다른 프로세스들에게 자원을 할당한다.





## 기아 상태(Starvation)란?

특정 프로세스의 우선순위가 낮아서 원하는 자원을 오랜 시간 할당받지 못하는 상태를 말한다.

## 기아상태 해결 방안

- 프로세스 우선순위를 수시 변경하여 각 프로세스들이 높은 우선순위를 가지도록 기회를 부여한다.

- 오래 기다린 프로세스의 우선순위를 높인다.

- 우선순위가 아닌 요청 순서대로 작업을 처리하는 요청 `Queue`를 사용한다.
