# 데이터베이스 - 정규화

## 정규화란?

>**데이터베이스 정규화란?**
데이터베이스 정규화는 데이터베이스 설계에서 중복을 최소화하고 데이터의 일관성과 무결성을 유지하기 위한 과정이다.<br>
정규화는 데이터를 효과적으로 구조화하여 데이터의 중복을 제거하고 이상(Anomaly)을 방지하여 데이터베이스의 성능과 유지보수를 향상시킬 수 있다.
주로 관계형 데이터베이스에서 사용되며, 일반적으로 **1NF(제 1 정규화)**부터 **5NF(제 5 정규화)**까지의 정규화 단계가 있다.


## 먼저 종속에 대해 알아보자.

### 1. 함수적 종속이란?
**함수적 종속이란** 어떤 릴레이션 R이 있을때 X와 Y를 각각 속성의 부분집합이라고 가정해보자.

여기서 X의 값을 알면 Y의 값을 바로 식별할 수 있고, X의 값에 Y의 값이 달라질 때, Y는 X에 함수적 종속이라고 한다.
이 경우 X를 결정자, Y를 종속자라고 합니다.
이를 기호로 표현하면 `X → Y`로 표현할 수 있다. 이런 함수적 종속관계에는 완전 함수적 종속과 부분 함수적 종속 및 이행적 함수 종속이 있다.

### 2. 완전 함수적 종속

**완전 함수적 종속**이란 한 테이블에서 어떤 속성이 다른 속성의 부분집합에 의해서만 결정되지 않고, 전체 속성에 의해서만 결정될 때를 말한다.

즉 속성 하나는, 테이블의 다른 모든 속성들을 결정해야 한다. 흔히 주요키를 사용하며, 주요키 이외의 속성 사이에는 어떠한 종속성도 없는 것을 말한다.


### 3. 부분적 함수 종속

**부분적 함수 종속**은 어떤 릴레이션에서 기본 키의 일부 속성이 다른 속성에 대해 함수 종속성을 가지는 경우를 나타낸다.
기본 키의 일부인 속성이 다른 속성에 종속적인 경우, 이를 부분적 함수 종속이라고 합니다.

예를들어, 속성 **A**가 **B**,**C**,**D**를 결정하지만, **C**가 **D**를 결정할 수도 있는 경우 부분적 함수 종속이라고 한다.


### 4. 이행적 함수 종속

이행적 함수 종속은 어떤 릴레이션에서 **A**가 **B**에 함수 종속하고, **B**가 **C**에 함수 종속할 때, **A**가 **C**에도 함수 종속되는 경우를 의미한다.
```
C -> B 이고, B -> A 이면
C -> A 인 상황을 뜻한다.
```
이는 간접적인 함수 종속성을 나타냅니다.

### 5. 다치 종속이란?

다치종속이란 다음과 같은 종속을 만족할 때를 말한다.

-  A->B 일 때 하나의 A값에 여러 개의 B값이 존재하면 다치 종속성을 가진다고 하고 `A↠B`라고 표시한다

- 최소 3개의 칼럼이 존재한다.

- R(A, B, C)가 있을 때 A와 B 사이에 다치 종속성이 있을 때 B와 C가 독립적이다.



## 제1 정규화(1NF)

- 테이블의 컬럼이 원자값(Atomic Value, 하나의 값)을 갖도록 테이블을 분해하는 것이다.

- 즉, 한 필드값은 쪼개지지 않는 하나의 값을 만족해야 한다.



## 제2 정규화(2NF)
-  제1 정규화를 진행한 테이블에 대해 완전 함수 종속을 만족하도록 테이블을 분해하는 것이다.

- 즉, 기본키가 2개 이상의 속성으로 이루어진 경우, 부분 함수 종속성을 제거(분해)한다.


## 제3 정규화(3NF)
- 제3 정규화란 제2 정규화를 진행한 테이블의 키가 아닌 속성들에 대해 이행적 종속을 없애도록 테이블을 분해하는 것이다.


## BCNF

- BCNF 정규화란 제3 정규화를 진행한 테이블에 대해 모든 결정자가 후보키가 되도록 테이블을 분해하는 것이다.

- 예를들어, A,B가 후보키이고, C와 D라는 속성이 있을 때, C가 B에 의해 결정될 때, 테이블을 분해해야 한다.

## 제4 정규화
- 여러 컬럼들이 하나의 컬럼을 종속시키는 경우 분해하여 다중값 종속성을 제거한다.

- 예를 들어, `(이름, 취미, 좋아하는 음식)` 이러한 테이블이 있을 때,
  제4 정규화를 진행하면, `(이름,취미)` / `(이름, 좋아하는 음식)`으로 테이블을 분해한다.

## 제5 정규화

- 조인에 의해서 종속성이 발생하는 경우 분해한다.

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2F9gog7%2FbtrP6gUdKXn%2FjTHi5a8esN1fCrOYLRIGk1%2Fimg.png)
위 그림과 같이 A를 분해한 B,C테이블을 다시 조인했을 때 최초 분해하기 전의 A와 같다면, 조인 종속이라고 한다.