# 컨텍스트 스위칭에 대해 설명해보세요.

< 답변의 키포인트> 

컨텍스트 스위칭이란 여러개의 프로세스가 실행되고 있을 때, 실행되던 프로세스를
중단하고 다른 프로세스를 실행하는 것으로, CPU에 실행할 프로세스를 교체하는 방식이다.
---



<프로세스 제어 블록과 문맥교환>

**프로세스 제어 블록(PCB)**

PCB는 운영체제 커널의 Data 영역에서 관리되고 있는 CPU 가 프로세스를 실행할 때 필요한 중요 정보들을 보관하는 자료구조이다. 프로세스 생성 시에 만들어지고 종료 시에 폐기된다.

**문맥교환(Context Switching)**

CPU 를 차지하고 있던 프로세스가 나가고 준비상태에 있던 프로세스를 새롭게 받아들이는 작업, 프로세스가 할당된 시간을 전부 사용한 Timeout 이나 I/O 요청, system call 과 같은 상황에서 발생한다.

---

[메모리]

* 가상 메모리
* 물리 메모리
* 커널 메모리

< 커널 메모리>

운영체제 또한 하나의 프로세스이기 때문에 메모리에 커널이라는 영역에 위치한다.

- Code: system call, 인터럽트 처리, 자원 관리, 인터페이스 제공 코드 등이 있다.
- Data: Process Controll Block, 현재 수행 중인 프로세스의 상태를 저장하는 자료구조인 PCB가 저장된다.
- Stack: 각 프로세스의 커널 스택을 저장한다.
    - 프로세스는 기본적으로 유저 스택과 커널 스택을 각각 가지고 있다.
    - 커널 스택의 첫번째 목적은 커널 모드에서 유저 모드로 전환하기 위해 필요한 정보를 저장한다.
    - 커널 스택의 두번째 목적은 커널 모드에서 함수를 호출하게 되면 그 함수의 지역변수는 커널 모드 스택 영역에 할당된다(유저 모드에서 함수를 호출하면 지역변수가 유저 모드 스택 영역에 할당되는 것과 같다).
    - 자세히 말하면, 프로세스가 운영체제에 시스템 콜을 호출하면 프로세스의 프로그램 카운터(PC)가 커널 주소 공간의 코드를 가리키게 된다. 그리고 커널의 함수들을 호출하며 커널 스택에 관련된 정보가 쌓인다.
